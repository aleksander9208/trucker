# Проект витрина транспортных компания

Для разворачивния проекта нужно выполнить:
1. Копиреум репозиторий с докером `git clone git@ssh.gitlab.taxcom.ru:edidata-development/docker.git НазваниеПапкиПроектаГдеРазмешается`
2. Перед сборкой выполняем требуем настройки описанные в описание
3. Заходим в папку проекта с докером, выполняем команду по копированию проект `git clone git@ssh.gitlab.taxcom.ru:OstroushkoAO/vitrina-fns.git www`
   **ВАЖНО: ПРОЕКТ ДОЛЖЕН НАХОДИТСЯ В ПАПКЕ WWW**
4. Выполняем последовательность для сборки контейнера указанные в DOCKER (рекомендуется устанавиливать 8.1 версию PHP)
5. Заходим на тестовую площадку и делаем бэкап БД и ядра `/bitrix/admin/dump.php?lang=ru` в параметрах ставим галочки
    1) Архивировать базу данных
    2) Архивировать ядро
    3) Проверить целостность архива после завершения
6. После создание архива, скачиваем его и файл `restore.php` из проекта и переносим в папку с проектом в папку `www`,
7. Запускаем разворачивание ядра и БД из пути `localhost/restore.php` или если прописали в файле host название то `название из хоста/restore.php`
8. Выбираем `архив загружке в корень` и ждем окончание разворачивание ядра с БД
9. По окончанию проверяем работу

Внимание:
- Для корректной сборки cron образа Docker Compose должен быть больше 2 версии. Проверялось на v2.15.1.
- Работа в windows только в wsl2.

## Структура проекта которая должна получится у нас
```bash
-- docker
    -- bash_history # папка для хранения истории bash контейнеров
    -- conf # конфиги. ngnix и пр.
    -- dumps # папка для дампов БД
    -- images # папка с docker образами
    -- initdata # папка со служебными файлами
-- www # root директория проекта
-- .env.example # пример файла `.env`
-- Makefile # команды make. Список команд make можно посмотреть так: `make` или `make help`
-- docker-compose.yml # конфиг контейнеров
```

## Описание главных веток
1. develop - ветка для разработки, от нее откалываемся и работаем. Она же случит для обновления тестовой площадке
2. main - ветка для боя 
